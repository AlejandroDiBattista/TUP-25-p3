@page "/productos"
@using cliente.Models
@inject cliente.Services.ApiService ApiService

<h3>Cat√°logo de Productos</h3>

<input @bind="busqueda" placeholder="Buscar..." />
<button @onclick="Buscar">Buscar</button>

@if (productos == null)
{
    <p>Cargando productos...</p>
}
else if (productos.Count == 0)
{
    <p>No hay productos para mostrar.</p>
}
else
{
    <div style="display: flex; flex-wrap: wrap; gap: 16px;">
        @foreach (var p in productos)
        {
            <div style="border: 1px solid #ccc; padding: 10px; width: 220px;">
                <img src="@p.ImagenUrl" alt="@p.Nombre" style="width:200px;height:200px;object-fit:cover;" />
                <h4>@p.Nombre</h4>
                <p>@p.Descripcion</p>
                <p><b>Precio:</b> $@p.Precio</p>
                <p><b>Stock:</b> @p.Stock</p>
            </div>
        }
    </div>
}

@code {
    List<Producto>? productos;
    string? busqueda;

    protected override async Task OnInitializedAsync()
    {
        productos = await ApiService.ObtenerProductosAsync();
    }

    async Task Buscar()
    {
        productos = await ApiService.ObtenerProductosAsync(busqueda);
    }
}