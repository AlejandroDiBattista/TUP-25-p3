@page "/productos"
@inject ProductoService ProductoService

<h3>Catalogo de Productos</h3>

@if (productos is null)
{
    <p>Cargando productos...</p>
}
else if (productos.Count == 0)
{
    <p>No se encontraron productos.</p>
}
else
{
    <div>
        @foreach (var prod in productos)
        {
            <div style="border:1px solid #ccc; margin:10px; padding:10px; display:inline-block; width:250px;">
                <img src="@prod.ImagenUrl" alt="@prod.Nombre" style="width:100%; height:120px; object-fit:cover;" />
                <h5>@prod.Nombre</h5>
                <p>@prod.Descripcion</p>
                <b>Precio:</b> @prod.Precio.ToString("C")
                <br />
                <b>Stock:</b> @prod.Stock
                <br />
                <button class="btn btn-primary" disabled="@(@prod.Stock == 0)">Agregar al carrito</button>
            </div>
        }
    </div>
}
@code 
{
    List<Producto>? productos;
    
    protected override async Task OnInitializedAsync()
    {
        productos = await ProductoService.GetProductosAsync();
    }
}
